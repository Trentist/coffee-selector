# Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ ÙˆØ§Ù„Ø´Ø§Ù…Ù„ Ø§Ù„Ø°ÙŠ ÙŠÙˆÙØ± Ø¬Ù…ÙŠØ¹ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ù…Ø±ÙˆÙ†Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚.

## Ø§Ù„Ù…ÙŠØ²Ø§Øª

### ğŸ” Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
- Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
- Ù†Ø³ÙŠØ§Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬

### ğŸ”‘ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù€ Google OAuth
- Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© (2FA)
- Ø±Ø¨Ø· Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª

### ğŸ›¡ï¸ Ø§Ù„Ø£Ù…Ø§Ù†
- ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Rate Limiting)
- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª (Input Validation)
- ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±
- Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ù‡Ø¬Ù…Ø§Øª CSRF
- Ø¬Ù„Ø³Ø§Øª Ø¢Ù…Ù†Ø©

### ğŸ“§ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨
- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
- ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
- Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨
- Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù†Ø´Ø±Ø© Ø§Ù„Ø¥Ø®Ø¨Ø§Ø±ÙŠØ©

## Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª
```
src/components/auth/
â”œâ”€â”€ LoginForm.tsx          # Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
â”œâ”€â”€ RegisterForm.tsx       # Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
â”œâ”€â”€ ForgotPasswordForm.tsx # Ù†Ù…ÙˆØ°Ø¬ Ù†Ø³ÙŠØ§Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
â””â”€â”€ index.ts              # Ù…Ù„Ù Ø§Ù„ØªØµØ¯ÙŠØ±
```

### Ø§Ù„Ø®Ø¯Ù…Ø§Øª
```
src/services/
â”œâ”€â”€ auth/
â”‚   â””â”€â”€ auth.service.ts    # Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â””â”€â”€ security/
    â”œâ”€â”€ rate-limiter.service.ts    # ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
    â””â”€â”€ input-validator.service.ts # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
```

### API Routes
```
src/app/api/auth/
â””â”€â”€ [...nextauth]/
    â”œâ”€â”€ route.ts           # NextAuth API route
    â””â”€â”€ auth-config.ts     # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª NextAuth
```

### GraphQL
```
src/graphql/mutations/
â””â”€â”€ auth.ts               # Ø·Ù„Ø¨Ø§Øª GraphQL Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø©
```

## Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### 1. Ø¥Ø¹Ø¯Ø§Ø¯ NextAuth

```typescript
// src/app/api/auth/[...nextauth]/auth-config.ts
export const authOptions: NextAuthOptions = {
  providers: [
    GoogleProvider({
      clientId: process.env.GOOGLE_CLIENT_ID!,
      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
    }),
    CredentialsProvider({
      // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©
    }),
  ],
  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...
};
```

### 2. Ø§Ø³ØªØ®Ø¯Ø§Ù… Hook Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

```typescript
import { useAuth } from "@/hooks/useAuth";

const MyComponent = () => {
  const {
    user,
    isAuthenticated,
    isLoading,
    login,
    logout,
    register
  } = useAuth();

  const handleLogin = async () => {
    const result = await login({
      email: "user@example.com",
      password: "password123",
      rememberMe: true,
    });
  };

  return (
    <div>
      {isAuthenticated ? (
        <button onClick={logout}>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
      ) : (
        <button onClick={handleLogin}>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      )}
    </div>
  );
};
```

### 3. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

```typescript
import { LoginForm, RegisterForm, ForgotPasswordForm } from "@/components/auth";

const AuthPage = () => {
  const [mode, setMode] = useState("login");

  return (
    <div>
      {mode === "login" && (
        <LoginForm
          onSuccess={() => console.log("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„")}
          onSwitchToRegister={() => setMode("register")}
          onSwitchToForgotPassword={() => setMode("forgot")}
        />
      )}
      {mode === "register" && (
        <RegisterForm
          onSuccess={() => console.log("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„")}
          onSwitchToLogin={() => setMode("login")}
        />
      )}
      {mode === "forgot" && (
        <ForgotPasswordForm
          onSuccess={() => console.log("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†")}
          onSwitchToLogin={() => setMode("login")}
        />
      )}
    </div>
  );
};
```

## Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

```env
# Authentication
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret-key

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Odoo Integration
NEXT_PUBLIC_ODOO_URL=https://your-odoo-instance.com
NEXT_PUBLIC_ODOO_API_TOKEN=your-odoo-api-token
```

## Ø§Ù„Ø£Ù…Ø§Ù†

### ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
- 5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙƒÙ„ 15 Ø¯Ù‚ÙŠÙ‚Ø©
- 3 Ù…Ø­Ø§ÙˆÙ„Ø§Øª ØªØ³Ø¬ÙŠÙ„ ÙƒÙ„ Ø³Ø§Ø¹Ø©
- 3 Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù†Ø³ÙŠØ§Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙƒÙ„ Ø³Ø§Ø¹Ø©

### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
- ØªÙ†Ø¸ÙŠÙ ÙˆØªØ·Ù‡ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
- Ù…Ù†Ø¹ Ø­Ù‚Ù† HTML

### Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø¢Ù…Ù†Ø©
- JWT tokens Ù…Ø´ÙØ±Ø©
- HttpOnly cookies
- SameSite protection
- Secure cookies ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬

## Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø£Ø®Ø±Ù‰

### Redux Store
```typescript
// ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Redux
const { user } = useAuth();
useEffect(() => {
  if (user) {
    dispatch(setUser(user));
  }
}, [user, dispatch]);
```

### Router Protection
```typescript
// Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø§Øª
const ProtectedPage = () => {
  const { isAuthenticated, isLoading } = useAuth();
  const router = useRouter();

  useEffect(() => {
    if (!isLoading && !isAuthenticated) {
      router.push("/auth/login");
    }
  }, [isAuthenticated, isLoading, router]);

  if (isLoading) return <LoadingSpinner />;
  if (!isAuthenticated) return null;

  return <div>Ù…Ø­ØªÙˆÙ‰ Ù…Ø­Ù…ÙŠ</div>;
};
```

## Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

```typescript
// Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
test("should login successfully", async () => {
  const { result } = renderHook(() => useAuth());

  await act(async () => {
    await result.current.login({
      email: "test@example.com",
      password: "password123",
    });
  });

  expect(result.current.isAuthenticated).toBe(true);
});
```

## Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©

Ù„Ù„Ù…Ø³Ø§Ù‡Ù…Ø© ÙÙŠ ØªØ·ÙˆÙŠØ± Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:

1. Ø§ØªØ¨Ø¹ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªØ±Ù…ÙŠØ² Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
2. Ø§ÙƒØªØ¨ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø´Ø§Ù…Ù„Ø©
3. ÙˆØ«Ù‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
4. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø£Ù…Ø§Ù†

## Ø§Ù„ØªØ±Ø®ÙŠØµ

Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø²Ø¡ Ù…Ù† Ù…Ø´Ø±ÙˆØ¹ Coffee Selection ÙˆÙŠØ®Ø¶Ø¹ Ù„Ù†ÙØ³ Ø´Ø±ÙˆØ· Ø§Ù„ØªØ±Ø®ÙŠØµ.